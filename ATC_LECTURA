CREATE TABLE ATC_LECTURA(
    "ID" NUMBER,
    "FECHACREADO" TIMESTAMP (6),
    "TITULO" VARCHAR2(200),
    "DESCRIPCION" VARCHAR2(1000),
    "TIPOLECTURA" VARCHAR2(50),
    "USUARIO" VARCHAR2(20),
    "TIEMPOLECTURA" VARCHAR2(5)
);

-- Crea la secuencia
CREATE SEQUENCE ATC_LECTURA_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

-- Modifica la secuencia
ALTER TABLE ATC_LECTURA MODIFY ID NUMBER;

CREATE OR REPLACE EDITIONABLE TRIGGER ATC_LECTURA_TRG
BEFORE INSERT ON ATC_LECTURA 
FOR EACH ROW 
BEGIN
  IF INSERTING AND :NEW.ID IS NULL THEN
    SELECT ATC_LECTURA_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
  END IF;
END;
/

-- Activa la secuencia
ALTER TRIGGER ATC_LECTURA_TRG ENABLE;

-- Verifica que esxista
SELECT trigger_name, status
FROM user_triggers
WHERE trigger_name = 'PYMES_REQUERIMIENTOS_TRG';
